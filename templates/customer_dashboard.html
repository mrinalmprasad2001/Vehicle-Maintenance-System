{% extends 'base.html' %}
{% block content %}
<style>
  body {
    background-color: #f8f9fa;
  }
  .dashboard-title {
    color: #161179;
  }
  .card {
    border-radius: 0.75rem;
  }
  .card-header {
    font-weight: 600;
  }
  .btn-custom:hover {
    opacity: 0.9;
  }
  @media (max-width: 768px) {
    h2.dashboard-title {
      font-size: 1.5rem;
    }
    .card-header h5 {
      font-size: 1rem;
    }
    .btn {
      font-size: 0.85rem;
    }
    .list-group-item {
      flex-direction: column;
      align-items: flex-start !important;
      text-align: left;
    }
    .list-group-item a {
      width: 100%;
      margin-top: 0.5rem;
    }
  }
</style>
<div class="container my-5">
  <div class="text-center mb-5">
    <h2 class="fw-bold dashboard-title">Welcome, {{ user.username|title }}!</h2>
    <p class="text-muted">Manage your vehicles and service requests easily.</p>
  </div>
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center flex-wrap">
      <h5 class="mb-2 mb-md-0">Your Vehicles</h5>
      <a href="{% url 'add_vehicle' %}" class="btn btn-sm btn-custom" style="background-color:#001BB7; color:white;">
        + Add Vehicle
      </a>
    </div>
    <ul class="list-group list-group-flush">
      {% for v in vehicles %}
        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
          <div>
            <strong>{{ v.vehicle_number }}</strong><br>
            <small class="text-muted">{{ v.vehicle_model }} {{ v.company }}</small>
          </div>
        </li>
      {% empty %}
        <li class="list-group-item text-center text-muted">
          No vehicles added yet.
        </li>
      {% endfor %}
    </ul>
  </div>
  <div class="card shadow-sm">
    <div class="card-header text-white d-flex justify-content-between align-items-center flex-wrap" style="background-color:#450693;">
      <h5 class="mb-2 mb-md-0">Service Requests</h5>
      <a href="{% url 'book_service' %}" class="btn btn-sm btn-custom" style="background-color:#640D5F; color:white;">
        + Book Service
      </a>
    </div>
    <ul class="list-group list-group-flush">
      {% for s in services %}
        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
          <div>
            <strong>{{ s.vehicle.vehicle_model }}</strong><br>
            <small class="text-muted">Status: {{ s.status }}</small>
          </div>
          <a href="{% url 'submit_feedback' s.id %}" class="btn btn-warning btn-sm mt-2 mt-md-0">
            Feedback
          </a>
        </li>
      {% empty %}
        <li class="list-group-item text-center text-muted">
          No services booked yet.
        </li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}